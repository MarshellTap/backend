'use strict';

exports.__esModule = true;

var _graphql = require('graphql');

var _language = require('graphql/language');

var _bignumber = require('bignumber.js');

var _bignumber2 = _interopRequireDefault(_bignumber);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

_bignumber2.default.config({ DECIMAL_PLACES: 2 });

exports.default = new _graphql.GraphQLScalarType({
  name: 'Decimal',
  description: 'The `Decimal` scalar type to represent currency values',

  serialize: function serialize(value) {
    // value sent to the client
    return new _bignumber2.default(value).toPrecision(2);
  },
  parseValue: function parseValue(value) {
    // value from the client
    if (isNaN(new _bignumber2.default(value))) {
      throw new TypeError(String(value) + ' is not a valid decimal value.');
    }

    return (0, _bignumber2.default)(value);
  },
  parseLiteral: function parseLiteral(ast) {
    if (ast.kind !== _language.Kind.STRING) {
      throw new TypeError(String(ast.value) + ' is not a valid decimal value.');
    }

    return (0, _bignumber2.default)(ast.value);
  }
});
module.exports = exports.default;